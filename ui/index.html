<!DOCTYPE html>
<html lang="en-CA">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GTA Childcare | Find Daycare & Babysitters</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" href="/favicon.ico" />
  <meta name="description" content="Discover licensed daycares, home daycares, and babysitters in GTA. Easy search, verified providers, and early access for childcare providers.">

  <!-- Open Graph for social sharing -->
  <meta property="og:title" content="GTA Childcare | Trusted Daycare & Babysitters" />
  <meta property="og:description" content="Search licensed daycares and babysitters in Greater Toronto Area. Sign up for launch updates!" />
  <meta property="og:image" content="https://daycare-8l4.pages.dev/hero.jpg" />
  <meta property="og:url" content="https://daycare-8l4.pages.dev/" />
  <meta name="twitter:card" content="summary_large_image" />
</head>
<body>

<!-- HERO SECTION -->
<section class="hero">
  <div class="hero-content container">
    <div class="hero-text">
      <h1>Find Trusted Daycare & Babysitters in GTA</h1>
      <p>Search licensed daycares, home daycares, and babysitters with real availability in Toronto, Brampton, Mississauga & Scarborough.</p>
      <div class="hero-buttons">
        <a href="#parents-form" class="btn btn-primary">Find Daycare Near Me</a>
        <a href="#provider-form" class="btn btn-secondary">List Your Daycare – Free Early Access</a>
      </div>
      <div class="trust-signals">
        <span>GTA-focused</span> •
        <span>No spam</span> •
        <span>Verified providers</span>
      </div>
      <span class="small-text">Launching soon • Early providers get premium visibility</span>
    </div>
    <div class="hero-image">
      <img src="hero.jpg" alt="Happy children playing at daycare">
    </div>
  </div>
</section>

<!-- PARENTS INFO -->
<section class="info-section">
  <div class="container">
    <h2>Finding childcare shouldn’t feel impossible</h2>
    <ul>
      <li>Search by postal code or city</li>
      <li>Filter by licensed or home daycare</li>
      <li>Find care for infants, toddlers, and preschoolers</li>
      <li>See providers near your home</li>
      <li>Clear availability and contact details</li>
    </ul>
  </div>
</section>

<!-- PROVIDERS INFO -->
<section class="info-section providers">
  <div class="container">
    <h2>Get discovered by parents actively looking for childcare</h2>
    <ul>
      <li>Appear in local search results</li>
      <li>Receive direct parent inquiries</li>
      <li>Free early access for early providers</li>
      <li>Licensed and verified badges (optional)</li>
      <li>Show real availability to parents</li>
    </ul>
    <span class="small-text">No credit card required • Cancel anytime</span>
  </div>
</section>

<!-- WHY DIFFERENT CARDS -->
<section class="cards-section">
  <div class="container three-columns">
    <div class="card">
      <h3>Local First</h3>
      <p>Focused only on Toronto and surrounding areas — not a generic global directory.</p>
    </div>
    <div class="card">
      <h3>Availability Matters</h3>
      <p>Providers control their listings so parents don’t waste time on outdated information.</p>
    </div>
    <div class="card">
      <h3>Trust & Transparency</h3>
      <p>Licensed, home daycare, and babysitters are clearly labeled for parents to choose confidently.</p>
    </div>
  </div>
</section>

<!-- FORMS SECTION -->
<section class="forms-section">
  <div class="container two-forms">

    <!-- Parent Form -->
    <form id="parents-form" action="https://formspree.io/f/mkowlkdd" method="POST" data-role="parent">
      <h3>Parents: Notify Me</h3>
      <label>Name:<input type="text" name="name" required></label>
      <label>Email:<input type="email" name="email" required></label>
      <label>Postal Code / Area:<input type="text" name="location"></label>
      <button type="submit" class="btn btn-primary">Notify Me</button>
      <p class="form-success" hidden>Thank you! We'll notify you when we launch.</p>
    </form>

    <!-- Provider Form -->
    <form id="provider-form" action="https://formspree.io/f/mkowlkdd" method="POST" data-role="provider">
      <h3>Providers: Get Early Access</h3>
      <label>Name:<input type="text" name="name" required></label>
      <label>Email:<input type="email" name="email" required></label>
      <label>Role:
        <select name="role">
          <option value="home_daycare">Home Daycare</option>
          <option value="licensed_daycare">Licensed Daycare</option>
          <option value="babysitter">Babysitter</option>
        </select>
      </label>
      <label>Postal Code / Area:<input type="text" name="location"></label>
      <button type="submit" class="btn btn-primary">Get Early Access</button>
      <p class="form-success" hidden>Thank you! We'll notify you when we launch.</p>
    </form>

  </div>
</section>

<footer>
  <div class="container">
    <p>We are a listing and discovery platform only. We do not provide childcare services and encourage parents to independently verify providers.</p>
    <p>© 2025 GTA Childcare</p>
  </div>
</footer>

<script>
  // Fade-in on scroll
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if(entry.isIntersecting) entry.target.classList.add('visible');
    });
  }, { threshold: 0.1 });
  document.querySelectorAll('section, .hero').forEach(el => observer.observe(el));

  // Handle both forms with serverless email + Formspree
  async function handleFormSubmit(formId) {
    const form = document.getElementById(formId);
    const successMsg = form.querySelector(".form-success");
    const button = form.querySelector('button[type="submit"]');
    const originalText = button.textContent;
    const role = form.dataset.role; // parent or provider

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      button.disabled = true;
      button.textContent = "Sending...";

      const formData = new FormData(form);
      const payload = Object.fromEntries(formData.entries());
      payload.role = role; // send role to serverless function

      try {
        // 1️⃣ Send confirmation email via serverless function
        const emailResp = await fetch("/api/sendConfirmationEmail", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
        });

        if (!emailResp.ok) throw new Error("Email sending failed");

        // 2️⃣ Submit data to Formspree
        const fsResp = await fetch(form.action, {
          method: "POST",
          body: formData,
          headers: { Accept: "application/json" }
        });

        if (!fsResp.ok) throw new Error("Formspree submission failed");

        // 3️⃣ Show success message
        successMsg.hidden = false;
        form.querySelectorAll("input, select, button").forEach(el => el.disabled = true);
        button.textContent = "Sent!";

      } catch (err) {
        console.error(err);
        successMsg.hidden = false;
        successMsg.style.color = "red";
        successMsg.textContent = "Oops! Something went wrong.";
        button.disabled = false;
        button.textContent = originalText;
      }
    });
  }

  // Initialize forms
  handleFormSubmit("parents-form");
  handleFormSubmit("provider-form");
</script>

</body>
</html>
